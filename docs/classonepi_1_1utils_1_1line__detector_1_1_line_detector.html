<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bot&#39;n Roll ONE A+ - Raspberry Pi 5 library: onepi.utils.line_detector.LineDetector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Bot&#39;n Roll ONE A+ - Raspberry Pi 5 library
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classonepi_1_1utils_1_1line__detector_1_1_line_detector.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classonepi_1_1utils_1_1line__detector_1_1_line_detector-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">onepi.utils.line_detector.LineDetector Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad7ddeedaaf6290b04ac3665ceb678d69" id="r_ad7ddeedaaf6290b04ac3665ceb678d69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7ddeedaaf6290b04ac3665ceb678d69">compute_line</a> (self, readings)</td></tr>
<tr class="separator:ad7ddeedaaf6290b04ac3665ceb678d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afb360d9b222a72ec7977a593b789ef21" id="r_afb360d9b222a72ec7977a593b789ef21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb360d9b222a72ec7977a593b789ef21">_normalise</a> (self, reading, minimum, scale)</td></tr>
<tr class="separator:afb360d9b222a72ec7977a593b789ef21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d4fb5bd664c34163ba6b05d6ae97da" id="r_a48d4fb5bd664c34163ba6b05d6ae97da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48d4fb5bd664c34163ba6b05d6ae97da">_normalise_readings</a> (self, sensor_reading)</td></tr>
<tr class="separator:a48d4fb5bd664c34163ba6b05d6ae97da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c3d2de370c4f153c8cfb3448583308" id="r_ad7c3d2de370c4f153c8cfb3448583308"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7c3d2de370c4f153c8cfb3448583308">_calculate_factors</a> (self, ref, min, max)</td></tr>
<tr class="separator:ad7c3d2de370c4f153c8cfb3448583308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd58341b124765168c3cb5d0a7d1128" id="r_a7fd58341b124765168c3cb5d0a7d1128"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fd58341b124765168c3cb5d0a7d1128">_load_if_necessary</a> (self)</td></tr>
<tr class="separator:a7fd58341b124765168c3cb5d0a7d1128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e81f044b443468005f50022a6a80b1" id="r_a87e81f044b443468005f50022a6a80b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87e81f044b443468005f50022a6a80b1">_compute_line_value</a> (self, readings)</td></tr>
<tr class="separator:a87e81f044b443468005f50022a6a80b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ae7b21ee0b21fb83580c46924cbd09" id="r_a25ae7b21ee0b21fb83580c46924cbd09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25ae7b21ee0b21fb83580c46924cbd09">_cap_value</a> (self, value, lower_limit, upper_limit)</td></tr>
<tr class="separator:a25ae7b21ee0b21fb83580c46924cbd09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a4e08cda3e6f0f0bd53513a3cc4695" id="r_a59a4e08cda3e6f0f0bd53513a3cc4695"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59a4e08cda3e6f0f0bd53513a3cc4695">_convert_range</a> (self, x_value, x_min, x_max, y_min, y_max)</td></tr>
<tr class="separator:a59a4e08cda3e6f0f0bd53513a3cc4695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5992256d63013a1ce6052866402267" id="r_a0c5992256d63013a1ce6052866402267"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c5992256d63013a1ce6052866402267">_normalise_line_value</a> (self, line_value, size)</td></tr>
<tr class="separator:a0c5992256d63013a1ce6052866402267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae46467ad6b6a1a06bf9ed23cf4daee9" id="r_aae46467ad6b6a1a06bf9ed23cf4daee9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae46467ad6b6a1a06bf9ed23cf4daee9">_filter_line_value</a> (self, line_value, ref_value, max_value)</td></tr>
<tr class="separator:aae46467ad6b6a1a06bf9ed23cf4daee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72f80ea7b0de6d9200ee1b129570fee" id="r_ab72f80ea7b0de6d9200ee1b129570fee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab72f80ea7b0de6d9200ee1b129570fee">_compute_mean_gaussian</a> (self, reading)</td></tr>
<tr class="separator:ab72f80ea7b0de6d9200ee1b129570fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64e558ddae9235929200426adb09c9a0" id="r_a64e558ddae9235929200426adb09c9a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64e558ddae9235929200426adb09c9a0">_get_max_value_and_index</a> (self, lst)</td></tr>
<tr class="separator:a64e558ddae9235929200426adb09c9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a2f6b2cc380b83316199fbb15bb0cd5" id="r_a6a2f6b2cc380b83316199fbb15bb0cd5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a2f6b2cc380b83316199fbb15bb0cd5">_prune</a> (self, readings)</td></tr>
<tr class="separator:a6a2f6b2cc380b83316199fbb15bb0cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a8f324115ba1e97245eb30bc5ad490103" id="r_a8f324115ba1e97245eb30bc5ad490103"><td class="memItemLeft" align="right" valign="top"><a id="a8f324115ba1e97245eb30bc5ad490103" name="a8f324115ba1e97245eb30bc5ad490103"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_ref_max</b> = 1000</td></tr>
<tr class="separator:a8f324115ba1e97245eb30bc5ad490103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e28428198e86a363d851742e6a8a79" id="r_a89e28428198e86a363d851742e6a8a79"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89e28428198e86a363d851742e6a8a79">_cfg_loaded</a></td></tr>
<tr class="separator:a89e28428198e86a363d851742e6a8a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6acd83b4e234b506ef1a607c87c9960" id="r_ac6acd83b4e234b506ef1a607c87c9960"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6acd83b4e234b506ef1a607c87c9960">_scaling_factor</a></td></tr>
<tr class="separator:ac6acd83b4e234b506ef1a607c87c9960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef10a12ddecddb4ebad59d8b177f276" id="r_aeef10a12ddecddb4ebad59d8b177f276"><td class="memItemLeft" align="right" valign="top"><a id="aeef10a12ddecddb4ebad59d8b177f276" name="aeef10a12ddecddb4ebad59d8b177f276"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_previous_line_value</b> = 0</td></tr>
<tr class="separator:aeef10a12ddecddb4ebad59d8b177f276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9f711e8d82a66b06fa28a4311e553a" id="r_aba9f711e8d82a66b06fa28a4311e553a"><td class="memItemLeft" align="right" valign="top"><a id="aba9f711e8d82a66b06fa28a4311e553a" name="aba9f711e8d82a66b06fa28a4311e553a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_config</b> = <a class="el" href="classonepi_1_1utils_1_1line__sensor__config_1_1_line_sensor_config.html">LineSensorConfig</a>()</td></tr>
<tr class="separator:aba9f711e8d82a66b06fa28a4311e553a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Converts line sensor readings into a relative line position on the sensor.
It assumes that the array of sensors of a sensor peripheral are arranged in a straight line and equally spaced.
It provides methods to compute the location of the line relative to the device.
It outputs values in a range [-100, 100] where 0 (zero) corresponds to the centre of the sensor peripheral.
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad7c3d2de370c4f153c8cfb3448583308" name="ad7c3d2de370c4f153c8cfb3448583308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c3d2de370c4f153c8cfb3448583308">&#9670;&#160;</a></span>_calculate_factors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._calculate_factors </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ref</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>min</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Calculates the scaling factor given a reference value\
and a range defined by min and max values
This scaling factor is useful in normalising values
</pre> 
</div>
</div>
<a id="a25ae7b21ee0b21fb83580c46924cbd09" name="a25ae7b21ee0b21fb83580c46924cbd09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ae7b21ee0b21fb83580c46924cbd09">&#9670;&#160;</a></span>_cap_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._cap_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lower_limit</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>upper_limit</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Caps the value to lower and upper limits
</pre> 
</div>
</div>
<a id="a87e81f044b443468005f50022a6a80b1" name="a87e81f044b443468005f50022a6a80b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87e81f044b443468005f50022a6a80b1">&#9670;&#160;</a></span>_compute_line_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._compute_line_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readings</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Computes a line value in the range [0, ref_max]
</pre> 
</div>
</div>
<a id="ab72f80ea7b0de6d9200ee1b129570fee" name="ab72f80ea7b0de6d9200ee1b129570fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72f80ea7b0de6d9200ee1b129570fee">&#9670;&#160;</a></span>_compute_mean_gaussian()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._compute_mean_gaussian </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reading</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Lets assume the line detected gives us a discrete gaussian
where the probabilities are given by each sensor reading and
the values are pre-determined based on each sensor location:
 |sensor id | value  | probability |
 |----------|--------|-------------|
 |    0     |   1    |  reading[0] |
 |    1     |   2    |  reading[1] |
 |  (...)   | (...)  |    (...)    |
 |    7     |   8    |  reading[7] |

We can compute the mean of the gaussian (location of line) by:
 1) computing the product for each sensor: product = value * probability
 2) computing sum_products = product[0] + product[1] + ... + product[7]
 3) computing sum_probabilities = reading[0] + reading[1] + ... + reading[7]
 4) computing mean = sum_products / sum_probabilities
</pre> 
</div>
</div>
<a id="a59a4e08cda3e6f0f0bd53513a3cc4695" name="a59a4e08cda3e6f0f0bd53513a3cc4695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a4e08cda3e6f0f0bd53513a3cc4695">&#9670;&#160;</a></span>_convert_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._convert_range </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>x_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>x_min</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>x_max</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>y_min</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>y_max</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Converts a value x given in the range [x_min : x_max]
to a new value in the range [y_min : y_max]
</pre> 
</div>
</div>
<a id="aae46467ad6b6a1a06bf9ed23cf4daee9" name="aae46467ad6b6a1a06bf9ed23cf4daee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae46467ad6b6a1a06bf9ed23cf4daee9">&#9670;&#160;</a></span>_filter_line_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._filter_line_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>line_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ref_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max_value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Filters the line value to handle edge cases
such as no line detected or reading errors

:param line_value: the computed line value
:param ref_value: the reference value to help determining which side
is the line in case it's no longer detected (e.g. middle of the range)
:param max_value: the maximum value of the range
</pre> 
</div>
</div>
<a id="a64e558ddae9235929200426adb09c9a0" name="a64e558ddae9235929200426adb09c9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64e558ddae9235929200426adb09c9a0">&#9670;&#160;</a></span>_get_max_value_and_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._get_max_value_and_index </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lst</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the max value and its corresponding index from a list
</pre> 
</div>
</div>
<a id="a7fd58341b124765168c3cb5d0a7d1128" name="a7fd58341b124765168c3cb5d0a7d1128"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fd58341b124765168c3cb5d0a7d1128">&#9670;&#160;</a></span>_load_if_necessary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._load_if_necessary </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Loads values from config if they weren't loaded before
</pre> 
</div>
</div>
<a id="afb360d9b222a72ec7977a593b789ef21" name="afb360d9b222a72ec7977a593b789ef21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb360d9b222a72ec7977a593b789ef21">&#9670;&#160;</a></span>_normalise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._normalise </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reading</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>minimum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>scale</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">normalise a reading taking the minimum value of the range and a scale factor
</pre> 
</div>
</div>
<a id="a0c5992256d63013a1ce6052866402267" name="a0c5992256d63013a1ce6052866402267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5992256d63013a1ce6052866402267">&#9670;&#160;</a></span>_normalise_line_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._normalise_line_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>line_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Converts a line value in the range of [0, 8000] to a new range e.g. [-106, 106]
This method involves two steps:
1)  Converting the value in the range of [0, 8000] to a new range using a correction factor
    e.g. for a correction factor of 6% the new range is [-106, 106]
    The new range extends beyond 100 by a little margin specified by the correction factor in the config.
    The purpose of this is to enable adjusting the sensitivity of the readings near the extremities.
    For a sensor that is typically higher (away from the floor) this correction factor should be higher
    to prevent large jumps in the readings close to the extremities.
    By increasing the correction factor we are narrowing the sensitivity of the sensors and by reducing it
    we are extending the sensitivity out.
    There is a balance to achieve by tuning this value correctly in order to get the best of both worlds:
    - Smooth transitions in sensor value near the extremeties
    - Maximum sensitivity region of the sensor
2) Capping the values to the desired range [-100, 100]
</pre> 
</div>
</div>
<a id="a48d4fb5bd664c34163ba6b05d6ae97da" name="a48d4fb5bd664c34163ba6b05d6ae97da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d4fb5bd664c34163ba6b05d6ae97da">&#9670;&#160;</a></span>_normalise_readings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._normalise_readings </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>sensor_reading</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Normalize values for each sensor reading
</pre> 
</div>
</div>
<a id="a6a2f6b2cc380b83316199fbb15bb0cd5" name="a6a2f6b2cc380b83316199fbb15bb0cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a2f6b2cc380b83316199fbb15bb0cd5">&#9670;&#160;</a></span>_prune()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector._prune </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readings</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Deals with edge cases such when the max readings is on one of the sensors at the extremety
In such cases it bumps up the value of the sensor to be at the threshold level
</pre> 
</div>
</div>
<a id="ad7ddeedaaf6290b04ac3665ceb678d69" name="ad7ddeedaaf6290b04ac3665ceb678d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ddeedaaf6290b04ac3665ceb678d69">&#9670;&#160;</a></span>compute_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onepi.utils.line_detector.LineDetector.compute_line </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readings</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given an input as a set of sensors readings it computes a relative location of a line
along the length of the sensor and expresses the output in a range [-100, 100]
where 0 (zero) corresponds to the line being at the centre of the sensor.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a89e28428198e86a363d851742e6a8a79" name="a89e28428198e86a363d851742e6a8a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e28428198e86a363d851742e6a8a79">&#9670;&#160;</a></span>_cfg_loaded</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple onepi.utils.line_detector.LineDetector._cfg_loaded</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=  (</div>
<div class="line">        <span class="keyword">False</span>  <span class="comment"># flag to signal whether or not the config values have been read already</span></div>
<div class="line">    )</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6acd83b4e234b506ef1a607c87c9960" name="ac6acd83b4e234b506ef1a607c87c9960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6acd83b4e234b506ef1a607c87c9960">&#9670;&#160;</a></span>_scaling_factor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">list onepi.utils.line_detector.LineDetector._scaling_factor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=  [</div>
<div class="line">        0</div>
<div class="line">    ] * 8</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>onepi/utils/<b>line_detector.py</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>onepi</b></li><li class="navelem"><b>utils</b></li><li class="navelem"><a class="el" href="namespaceonepi_1_1utils_1_1line__detector.html">line_detector</a></li><li class="navelem"><a class="el" href="classonepi_1_1utils_1_1line__detector_1_1_line_detector.html">LineDetector</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
